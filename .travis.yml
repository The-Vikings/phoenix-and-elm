sudo: required

env:
  - TRAVIS_TEST=true
  - MIX_ENV=test

language: elixir 
elixir: '1.7.4'

services:
  - docker

cache:
  directories:
    - _build
    - deps

install:
  - git clone --recursive https://github.com/$TRAVIS_REPO_SLUG.git $TRAVIS_REPO_SLUG
  - cd $TRAVIS_REPO_SLUG
  - git checkout -qf $TRAVIS_COMMIT
script:
  - docker-compose -f docker-compose-test.yml up --exit-code-from phoenix
after_success:
  - rm -rf deps
  - mix local.hex --force
  - mix coveralls.travis
